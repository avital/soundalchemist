<body>
  {{> main}}
</body>

<template name="main">
  <div class="main">
    {{#if started}}
      {{#if pastArtworkUrl 1}}
        <div class="past past1" style="background-image: url({{pastArtworkUrl 1}})" />
      {{/if}}
      <div class="past past0" style="background-image: url({{pastArtworkUrl 0}})" />
      <div class="current">
        <iframe width="100%" height="166" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/{{currentTrackId}}&amp;color=ff6600&amp;auto_play=true&amp;show_artwork=true"></iframe>
      </div>
      {{#unless waiting}}
        <button class="act skip">onward</button>
        <button class="act downvote">dislike</button>
        <button class="act upvote">like</button>
      {{else}}
        <div class="act">
          <div class="act-loading">
            {{> loading}}
           </div>
        </div>
      {{/unless}}

      {{#each directions}}
        {{#each distance}}
          <div class="future future{{..}} future{{..}}_{{.}}" style="background-image: url({{futureArtworkUrl .. .}}); margin-top: {{top}}px; margin-left: {{left ..}}px" />
        {{/each}}
      {{/each}}
    {{else}}
      <div class="entry-wrapper">
        {{#if loading}}
          <div class="loading">
            {{> loading}}
          </div>
        {{else}}
          <input placeholder="soundcloud url" class="entry" />
          {{#if error}}
            <div class="entry-error">{{error}}</div>
          {{/if}}
        {{/if}}
      </div>
    {{/if}}
    </div>
  </div>
</template>
